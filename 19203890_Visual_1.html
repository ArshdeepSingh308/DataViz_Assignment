<html>
   <head>
      <title> Arshdeep Singh - Assignment</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5.9.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.0.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.2.1"></script>
      <style>
         body {
         font-family: sans-serif;
         }
      </style>
   </head>
   <body>
      <table style="width: 850px;" cellspacing="5" cellpadding="5">
         <tbody>
            <tr>
               <td style="width: 200px; vertical-align: top;"><strong>Name:&nbsp;</strong></td>
               <td style="vertical-align: top;">Arshdeep Singh</td>
            </tr>
            <tr>
               <td style="vertical-align: top;"><strong>Student Number:</strong></td>
               <td style="vertical-align: top;">19203890</td>
            </tr>
            <tr>
               <td style="vertical-align: top;"><strong>Dataset description:</strong></td>
               <td style="vertical-align: top;"> <a href="https://data.gov.ie/dataset/2016-make-model-year-failures-at-nct">NCT Failure Rates 2016</a>
                <br>
                <p>This dataset holds details of vehicle make, model and the year. Along with these it contains numerous tests which were performed on the vehicle. It has many attributes that gives information about which make, model and year failed in the NCT tests including Vehicle and Safety Equipment, Lighting and Electrical, Braking Equipment etc. </p>
              </td>
            </tr>
            <tr>
               <td style="vertical-align: top;"><strong>Question 1</strong></td>
               <td style="vertical-align: top;">How the top Vehicle Makers are performing with respect to the overall Pass and Fail percentages.</td>
            </tr>
         </tbody>
      </table>
      <hr />
      <div id="vis"></div>
      <hr />
      <table style="width: 850px;" cellspacing="5" cellpadding="5">
         <tbody>
            <tr>
               <td style="width: 200px; vertical-align: top;"><strong>Description:&nbsp;</strong></td>
               <td style="vertical-align: top;">This is a stacked bar graph (where the stack property of the bars is set to false). As can be seen from the graphs, I have chosen three of the top Vehicle Makers. The decision to choose these makers was taken when I was exploring different visualisations in Tableau. I will be proving in the later section why these makers are on the top. The makers are represented using a colour. The values for the PASS_p (PASS %) and FAIL_p (FAIL %) are binned. </td>
            </tr>
            <tr>
               <td style="vertical-align: top;"><strong>Insight:</strong></td>
               <td style="vertical-align: top;">Looking at the data, it is quite indicative that Volkswagen is way ahead from any other maker in PASS % and Toyota has the highest FAIL % values. This might bring a thought to our minds that Toyota is not performing well and is not better than Volkswagen. Well, this is not the case. As we see through the next question, things will tend to become clear. These graphs show the overall percentage of PASS and FAIL. Ford as can be seen is performing quite consistently and is not outstanding from the crowd. There is spike in both the graphs at 50 %, it is due to the fact the vehicle maker has passed and failed almost equal proportion of tests. </td>
            </tr>
            <tr>
               <td style="vertical-align: top;"><strong>Design considerations</strong></td>
               <td style="vertical-align: top;"><p>I decided to use the stacked bar graph which starts at a common axis as we are good at reading the bars which are at the same base and bar graphs are effective for analysing quantitative data. The opacity of the bars has been reduced to allow to see the variation between the companies. When dealing with a very large dataset, it is a good idea to use less rows from the table to create a visualization. I could have used all the unique companies but that would have led to confusion and no deductive conclusion could be made. The decision to have 30 bins was to have a slightly bigger bars than just straight lines. A clustered bar chat could have been a better choice but, we would lose the ability to compare the bars in one instance. It’s much easier to conclude from an overlapping graph than comparing it manually over a scale. </p>
                <p>The companies have been colour encoded. Another factor that led to choose three companies was, we are good at reading colour encoded data but, if the data becomes too large and too many colours are used to describe it, we eventually will loose the meaning of the graph. Also, three distinctive colours have been used so that it’s easy to differentiate and comprehend the bars.</p>
              </td>
            </tr>
            <tr>
               <td style="width: 200px; vertical-align: top;"><strong>Data filtering and transformation:&nbsp;</strong></td>
               <td style="vertical-align: top;">Only the data having the PASS % and FAIL % between 0 and 100 are shown.<br>
                <br>Please note, I have modified the headers in the dataset and I have attached my dataset with my submission for reference.
              </td>
            </tr>
         </tbody>
      </table>
      <script type="text/javascript">
        var yourVlSpec =  {
          "$schema": "https://vega.github.io/schema/vega-lite/v4.json",
          "title":{
              "text":"NCT Pass and Fail % 2016",
              "anchor":"middle",
              "fontSize": 15     
            },
          "data": {
            "url": "https://raw.githubusercontent.com/ArshdeepSingh308/DataViz_Assignment/master/Data.csv",
            "format": {
              "type": "csv"
            }
          },
          "transform": [
            {
              "filter": "datum.PASS_p > 0 && datum.PASS_p < 100"
            },
            {
                "filter":"datum.FAIL_p > 0 && datum.FAIL_p < 100"
            }
          ],
          "repeat":{
            "row": ["PASS_p", "FAIL_p"]
          },
          "spec":{
            "mark" : "bar",
            "encoding": {
              "x":{

                "field":{"repeat": "row"} ,
                "type":"quantitative",
                "bin": {"maxbins": 30}
              },
              "y":{
                "aggregate": "count", 
                "field": "*", 
                "type": "quantitative",
                "stack" : null,
                "axis": {"title": "Number of records"}
              },
              "color":{
                "field":"VehicleMake", "type":"nominal",
                "scale":{
                    "domain":["FORD","VOLKSWAGEN", "TOYOTA"], "range":["cyan","green", "pink" ]
                    }
                }
            }
          },
          "config": {
            "mark": {"opacity": 0.6},
            "axis": {
              "labelFontSize": 10,
              "titleFontSize": 12,
              "titlePadding": 10
            }
          }
        }
            vegaEmbed("#vis", yourVlSpec);
      </script>
   </body>
</html>